<!-- app/templates/auth/register.html -->
{% extends "auth/base.html" %}

{% block title %}Registro{% endblock %}

{% block content %}
<div class="max-w-md mx-auto bg-white p-8 rounded-lg shadow-md">
    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Registro de Usuario</h2>
    
    <form method="POST" action="{{ url_for('user_routes.register') }}" class="space-y-4">
        <div>
            <label class="block text-gray-700 mb-2">Nombre Completo</label>
            <input type="text" name="name" required
                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-green-500">
        </div>

        <div>
            <label class="block text-gray-700 mb-2">Email</label>
            <input type="email" name="email" required
                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-green-500">
        </div>

        <div>
            <label class="block text-gray-700 mb-2">Contraseña</label>
            <input type="password" name="password" required
                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-green-500">
        </div>

        <div>
            <label class="block text-gray-700 mb-2">Edad</label>
            <input type="number" name="age"
                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-green-500">
        </div>

        <div>
            <label class="block text-gray-700 mb-2">Ubicación</label>
            <select name="location" required
                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-green-500">
                <option value="">Seleccione un estado</option>
                {% set states = [
                    ('AL', 'Alabama'), ('AK', 'Alaska'), ('AZ', 'Arizona'),
                    ('AR', 'Arkansas'), ('CA', 'California'), ('CO', 'Colorado'),
                    ('CT', 'Connecticut'), ('DE', 'Delaware'), ('FL', 'Florida'),
                    ('GA', 'Georgia'), ('HI', 'Hawaii'), ('ID', 'Idaho'),
                    ('IL', 'Illinois'), ('IN', 'Indiana'), ('IA', 'Iowa'),
                    ('KS', 'Kansas'), ('KY', 'Kentucky'), ('LA', 'Louisiana'),
                    ('ME', 'Maine'), ('MD', 'Maryland'), ('MA', 'Massachusetts'),
                    ('MI', 'Michigan'), ('MN', 'Minnesota'), ('MS', 'Mississippi'),
                    ('MO', 'Missouri'), ('MT', 'Montana'), ('NE', 'Nebraska'),
                    ('NV', 'Nevada'), ('NH', 'New Hampshire'), ('NJ', 'New Jersey'),
                    ('NM', 'New Mexico'), ('NY', 'New York'), ('NC', 'North Carolina'),
                    ('ND', 'North Dakota'), ('OH', 'Ohio'), ('OK', 'Oklahoma'),
                    ('OR', 'Oregon'), ('PA', 'Pennsylvania'), ('RI', 'Rhode Island'),
                    ('SC', 'South Carolina'), ('SD', 'South Dakota'), ('TN', 'Tennessee'),
                    ('TX', 'Texas'), ('UT', 'Utah'), ('VT', 'Vermont'),
                    ('VA', 'Virginia'), ('WA', 'Washington'), ('WV', 'West Virginia'),
                    ('WI', 'Wisconsin'), ('WY', 'Wyoming')
                ] %}
                {% for code, name in states %}
                    <option value="{{ code }}">
                        {{ name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Hidden fields for latitude and longitude -->
        <input type="hidden" id="latitude" name="latitude">
        <input type="hidden" id="longitude" name="longitude">

        <div>
            <label class="block text-gray-700 mb-2">Condiciones Médicas</label>
            <select name="medical_condition" multiple
                class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-green-500">
                <option value="asthma">Asma</option>
                <option value="allergies">Alergias</option>
                <option value="cardiovascular">Problemas Cardiovasculares</option>
                <option value="respiratory">Problemas Respiratorios</option>
                <option value="diabetes">Diabetes</option>
                <option value="chronic_obstructive_pulmonary_disease">Enfermedad Pulmonar Obstructiva Crónica (EPOC)</option>
                <option value="lung_cancer">Cáncer de Pulmón</option>
                <option value="stroke">Accidente Cerebrovascular</option>
                <option value="chronic_bronchitis">Bronquitis Crónica</option>
                <option value="emphysema">Enfisema</option>
                <option value="pneumonia">Neumonía</option>
                <option value="hypertension">Hipertensión</option>
                <option value="heart_disease">Enfermedad del Corazón</option>
                <option value="immune_system_disorders">Trastornos del Sistema Inmunológico</option>
                <option value="pregnancy">Embarazo</option>
                <option value="children">Niños</option>
                <option value="elderly">Ancianos</option>
            </select>
            <p class="text-sm text-gray-500 mt-1">Mantén presionado Ctrl para seleccionar múltiples opciones</p>
        </div>

        <button type="submit"
            class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition duration-200">
            Registrarse
        </button>
    </form>

    <p class="mt-4 text-center text-gray-600">
        ¿Ya tienes una cuenta? <a href="{{ url_for('user_routes.login') }}"" class="text-green-600 hover:text-green-700">Inicia Sesión</a>
    </p>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                document.getElementById('latitude').value = position.coords.latitude;
                document.getElementById('longitude').value = position.coords.longitude;
            }, function(error) {
                console.error('Error getting location:', error);
            });
        } else {
            console.error('Geolocation is not supported by this browser.');
        }
    });
    </script>
{% endblock %}